
PortAS		equ	$1700
PortASDDR	equ	$1701
PortAK		equ	$1740
PortAKDDR	equ	$1741
GetKey		equ	$1F6A

		org	$0200

		code
;---------------------------------------------------------------------------------------------
;--------------------------------------- Main ----------------------------------------------
;---------------------------------------------------------------------------------------------
		lda	#$03
		sta	PortASDDR
		lda	#$00
		sta	PortAKDDR
Start:		jsr	Scan
		sty	$0199
		lda	#$01
		jsr	Wave
		ldy	$0199
		lda	#$01
		jsr	Wave
Wait:		jsr	GetKey
		cmp	$0199
		beq	Wait
		jsr	Delay100
;		jsr	Scan
		ldy	#$0F
		lda	#$02
		jsr	Wave
		ldy	#$0F
		lda	#$02
		jsr	Wave
		ldy	#$0F
		lda	#$02
		jsr	Wave
		ldy	#$0F
		lda	#$02
		jsr	Wave
		ldy	#$0F
		lda	#$02
		jsr	Wave
		ldy	#$0F
		lda	#$02
		jsr	Wave
		jmp	Start

;-----------------------------------------------------------------------------------------------
;--------------------------------------- Delay -----------------------------------------------
;-----------------------------------------------------------------------------------------------

Delay100: 		ldx	#$14
Jump:		dex
		bne	Jump
		rts

;---------------------------------------------------------------------------------------------
;----------------------- Scans for the key press and stores it in register y ----------
;---------------------------------------------------------------------------------------------


Scan:		jsr	GetKey
		cmp	#$15
		beq	Scan
		tay
		rts

;--------------------------------------------------------------------------------------------
;-------------------Generates digital signal from register y---------------------------
;--------------------------------------------------------------------------------------------

Wave:		sta	PortAS
Delay1:		jsr	Delay100
		dey
		bne	Delay1
		lda	#$00
		sta	PortAS
		ldy	#$C8
Delay2:		jsr	Delay100
		dey
		bne	Delay2
		rts





